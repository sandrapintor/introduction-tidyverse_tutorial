<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Introduction to the Tidyverse:   Data wrangling</title>
    <meta charset="utf-8" />
    <meta name="author" content="Sandra Pintor" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/leaflet/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet/leaflet.js"></script>
    <link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
    <script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
    <script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding/leaflet.js"></script>
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to the Tidyverse: <br> Data wrangling
## R-Ladies Frankfurt Meetup #2
### Sandra Pintor
### 23rd May 2019

---



# Agenda

### 1. Get to know each other
### 2. What is R-Ladies?
### 3. Introduction to the Tidyverse

---
class: inverse, center, middle

<div class="countdown" id="timer_5cf6e79a" style="top:0;right:0;left:0;" data-audio="true">
<code><span class="digits minutes">05</span><span class="digits colon">:</span><span class="digits seconds">00</span></code>
</div><div class="countdown" id="timer_5cf6ea48" style="right:33%;bottom:0;" data-audio="true">
<code><span class="digits minutes">01</span><span class="digits colon">:</span><span class="digits seconds">00</span></code>
</div>

# Get to know each other

Who am I? 

Where am I from?

What do I do?

Experience with R 

Hobbies/Funny thing

---
class: inverse, center, middle

# What is R-Ladies?

---
# R-Ladies

.pull-left[
![](https://rladies.org/wp-content/uploads/2016/12/R-LadiesGlobal.png)
&lt;/div&gt; 
]

.pull-right[
###**Worldwide** organization that promotes 

- ###**gender diversity** in the R-community 

- ###via **meetups** and **mentorship** 

- ###in a **friendly** and **safe** environment
]

---
# R-Ladies

- R-Ladies is a user-run group, meaning it is all of us that keep it going.

- Everyone is welcome to present something, no matter their skill level. 

- Presentations may be to showcase something you've been working on, to get feed-back on your approach or code, or just because you want to contribute and practise giving talks about coding.

- Everyone has something new to learn, and even a novice may have found an interesting way of doing someting an expert didn't think of.

---
# Code of Conduct

- Public events are **always** for free

- The conceptual domain / scope is **R**-specifc

- Be aware and acknowledge **other**'s contribution

- Use neutral language

- Constructive, supportive and **gender-inclusive** environment to share, learn and network

- Mentoring and organization is exclusively reservaded for women

---

# R-Ladies History

&lt;div style= "float:left; position: absolute;  padding: 10px;"&gt;
.pull-left[
![](images/GabrielaQueiroz.png)
]
&lt;/div&gt;

.pull-right[
###1st of October 2012
**Gabriela de Queiroz** founded R-Ladies 

She wanted to give back to the community after going to several meetups and learning a lot for free. 

The first meetup took place in San Francisco, California (United States). 
]

---
# R-Ladies Growth
&lt;div style="vertical-align: middle;display: inline-block; width:750px;"&gt;
![](images/RladiesGrowth.png)


---
# R-Ladies Global

<div id="htmlwidget-2f6c3414625be182eeca" style="width:100%;height:432px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2f6c3414625be182eeca">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[-34.6025,-31.4,-34.9096,-32.8833,-31.6239,-36.62,-54.79,-34.935,-27.455,-35.283,-37.82,-31.955,-33.92,48.3192,48.2,50.8333,6.4,-16.498,-12.97,-19.915,-21.2496,-25.42,-5.095,-22.925,-22.7499,-22.02,-23.2,-23.5587,-26.48,-6.9838,-30.05,42.6833,53.55,49.2734,48.4333,49.883,42.97,45.4167,43.7,45.5,-36.83,-33.0478,39.9289,7.1301,9.935,45.8,-2.22,-0.215,9.0333,60.1756,45.77,43.6104,48.8667,48.58,41.725,52.5218,50.1,48.0004,51.5204,51.3354,50.80904,48.1299,51.9704,48.78,22.305,47.5,28.6,12.97,19.017,18.53,13.09,10.81,17.4,-6.57,53.3331,41.1142,46.5004,45.47,38.125,46.0804,45.6504,-1.2833,33.872,49.6117,19.4424,19.7334,19.53,42.466,34.0253,27.7167,52.35,53.2204,51.92,52.1003,-36.8481,-41.2926,59.9167,-25.2964,-12.048,14.6042,52.25,38.7227,59.939,44.8186,-33.92,-26.17,41.3833,43.25,40.4,39.485,59.3508,46.5304,25.0358,36.8028,41.105,41.2,0.3167,25.23,57.1704,52.2004,55.9483,50.7004,55.8744,53.416,53.5004,55.0004,-34.858,41.1709,32.1558,35.0847,34.7255,35.3528,38.5552,33.6772,34.114,29.6583,33.9382,32.8312,37.7561,34.4285,36.9788,40.0274,39.7621,40.5487,43.3215,41.0669,29.6814,30.3322,25.784,28.4801,27.3391,30.4549,27.9937,32.2053,33.1136,46.7306,41.8373,41.6771,42.0262,47.3914,41.6558,39.9708,30.0687,27.8858,39.3051,42.3189,40.6865,42.7483,30.4082,39.1239,30.1689,45.6828,40.8102,42.6664,42.9016,42.4442,43.2991,35.208,39.1412,43.3354,35.3145,40.0076,40.4396,40.791,41.703,35.1047,35.9678,30.3038,32.7938,31.8478,29.7871,40.2458,38.0374,37.5294,47.6217,47.2431,43.0809],[-58.3975,-64.1823,-57.96,-68.8166,-60.69,-64.3,-68.31,138.6,153.0351,149.129,144.975,115.84,151.1852,14.2888,16.3666,4.3333,2.52,-68.15,-38.48,-43.915,-45.01,-49.32,-42.78,-43.225,-47.33,-47.89,-45.8799,-46.625,-52,-60.2699,-51.2,23.3167,-113.5,-123.1216,-123.35,-97.166,-81.25,-75.7,-79.42,-73.5833,-73.05,-71.621,116.3883,-73.1259,-84.0841,16,-79.92,-78.5001,38.7,24.9341,4.83,3.87,2.3333,7.75,44.7908,13.4015,8.675,7.8699,9.92,12.41,8.77069,11.575,7.62,9.2,114.185,19.0833,77.2,77.56,72.857,73.85,80.28,78.69,78.48,106.75,-6.2489,16.8728,11.36,9.205,13.35,11.12,13.8,36.8167,35.5097,6.13,-99.131,-101.1895,-96.92,19.2663,-6.8361,85.3166,4.9166,6.58,4.48,5.12,174.763,173.2474,10.75,-57.6415,-77.0501,120.9822,21,-9.1449,30.316,20.468,18.435,28.03,2.1834,-2.93,-3.6834,-0.4,18.0973,6.65,121.5683,10.1797,29.01,32.6,32.5833,55.28,-2.08,0.1166,-3.2191,-3.53,-4.2507,-2.918,-2.248,-1.6,-56.1711,-76.874,-110.8777,-78.9777,-92.3584,-119.0354,-121.7365,-117.7738,-118.4068,-95.1498,-117.3949,-117.1225,-122.4429,-119.7202,-122.0346,-105.2514,-104.8759,-105.0656,-88.3777,-85.0282,-82.3454,-81.6749,-80.2102,-81.3448,-82.5439,-84.2527,-82.4454,-95.8348,-94.1672,-116.9989,-87.6861,-86.269,-93.6275,-122.3154,-91.5304,-105.1441,-89.9288,-97.3201,-76.6144,-71.0838,-75.4902,-84.4834,-88.7861,-94.5541,-85.6092,-111.0545,-96.6808,-73.7987,-78.8487,-76.5032,-70.9791,-80.8308,-84.506,-89.0299,-80.6495,-75.134,-79.9763,-77.8568,-111.8122,-89.9773,-77.9547,-97.7545,-96.7659,-106.431,-95.3936,-111.6457,-78.4856,-77.4755,-122.3238,-122.4531,-89.3921],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#88398A","weight":5,"opacity":0.5,"fill":true,"fillColor":"#562457","fillOpacity":0.2},null,null,null,null,["Buenos Aires","Córdoba","La Plata","Mendoza","Santa Fe","Santa Rosa","Ushuaia","Adelaide","Brisbane","Canberra","Melbourne","Perth","Sydney","Linz","Vienna","Brussels","Cotonou","La Paz","Salvador","Belo Horizonte","Lavras","Curitiba","Teresina","Rio de Janeiro","Americana","São Carlos","São José dos Campos","São Paulo","Palmas","Natal","Porto Alegre","Sofia","Edmonton","Vancouver","Victoria","Winnipeg","London","Ottawa","Toronto","Montréal","Concepción","Valparaíso","Beijing","Bucaramanga","San José","Zagreb","Guayaquil","Quito","Addis Ababa","Helsinki","Lyon","Montpellier","Paris","Strasbourg","Tbilisi","Berlin","Frankfurt","Freiburg","Goettingen","Leipzig","Marburg","Munich","Münster","Stuttgart","Hong Kong","Budapest","New Delhi","Bangalore","Mumbai","Pune","Chennai","Tiruchirappalli","Hyderabad","Bogor","Dublin","Bari","Bolzano","Milan","Palermo","Trento","Trieste","Nairobi","Beirut","Luxembourg","Mexico City","Morelia","Xalapa","Podgorica","Rabat","Kathmandu","Amsterdam","Groningen","Rotterdam","Utrecht","Auckland","Nelson","Oslo","Asunción","Lima","Manila","Warsaw","Lisbon","St. Petersburg","Belgrade","Cape Town","Johannesburg","Barcelona","Bilbao","Madrid","Valencia","Stockholm","Lausanne","Taipei","Tunis","Istanbul","Karabük","Kampala","Dubai","Aberdeen","Cambridge","Edinburgh","Exeter","Glasgow","Liverpool","Manchester","Newcastle","Montevideo","Montgomery","Tucson","Fayetteville","Little Rock","Bakersfield","Davis","Irvine","Los Angeles","Pasadena","Riverside","San Diego","San Francisco","Santa Barbara","Santa Cruz","Boulder","Denver","Fort Collins","Hartford","New Haven","Gainesville","Jacksonville","Miami","Orlando","Sarasota","Tallahassee","Tampa","Athens","Atlanta","Moscow","Chicago","South Bend","Ames","Des Moines","Iowa City","Louisville","New Orleans","Portland","Baltimore","Boston","Northampton","East Lansing","Ocean Springs","Kansas City","Springfield","Bozeman","Lincoln","Albany","Buffalo","Ithaca","Rochester","Charlotte","Cincinnati","Columbus","Harrisburg","Philadelphia","Pittsburgh","State College","Providence","Memphis","Nashville","Austin","Dallas","El Paso","Houston","Provo","Charlottesville","Richmond","Seattle","Tacoma","Madison"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-54.79,60.1756],"lng":[-123.35,174.763]}},"evals":[],"jsHooks":[]}</script>

---
class: inverse, center, middle

# R-Ladies in Germany

---
# R-Ladies in Germany

<div id="htmlwidget-954a76c0f0163cac1b95" style="width:100%;height:432px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-954a76c0f0163cac1b95">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.133481,10.018343],5,[]],"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[52.5218,50.1,48.0004,51.5204,51.3354,50.80904,48.1299,51.9704,48.78],[13.4015,8.675,7.8699,9.92,12.41,8.77069,11.575,7.62,9.2],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#88398A","weight":5,"opacity":0.5,"fill":true,"fillColor":"#562457","fillOpacity":0.2},null,null,null,null,["Berlin","Frankfurt","Freiburg","Goettingen","Leipzig","Marburg","Munich","Münster","Stuttgart"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[48.0004,52.5218],"lng":[7.62,13.4015]}},"evals":[],"jsHooks":[]}</script>

---
class: inverse, center, middle

# R-Ladies Frankfurt

---
# Goals R-Ladies Frankfurt


Build an **active**, **supportive**, and **empowering** R community of women to:

- Learn R

- Teach R

- Share experiences

- Improve together

- Network

### More women coding, developing and creating R packages and being involved in the R community

---
# To keep in mind...

We all have different knowledge and level of experience 🤓
&lt;br&gt;
--
&lt;br&gt;
No matter if we're newbie or proficient R user, there's always something that we don't know! 🔍
&lt;br&gt;
--
&lt;br&gt;
No matter if you're newbie or proficient R user, don't be shy to ask, comment! 🙋
&lt;br&gt;
--
&lt;br&gt;
We're here to learn together! 💪

.pull-right[
![](https://media.giphy.com/media/xZx7ht7MH8Wqs/giphy.gif)
]

---
# How to be engaged?

.center[
### Participate in meetup

### Give a tutorial

### Mentor

### ...
]

---
class: inverse, center, middle

# Introduction to the Tidyverse

---
class: center, middle

# What are your expectations?

---
# Objectives

1. To generally understand tidyverse and differences between tidyverse and base R

2. To recognize packages and functions to wrangle data in the tidyverse

4. To write code using tidyverse packages

---
class: center, middle

# Tidyverse

---
# The tidyverse

.pull-left[
&lt;img src="https://github.com/rstudio/hex-stickers/raw/master/SVG/tidyverse.svg?sanitize=true" width="70%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
.center[

"(...) **collection of R** 📦 designed for data science. All packages **share** an underlying **design philosophy**, **grammar**, and **data structures**." ([www.tidyverse.org](https://www.tidyverse.org/))

Packages built on and in base R

]
&lt;br&gt;
Tidyverse:
- [style](https://style.tidyverse.org) guide
- [design principles](https://principles.tidyverse.org)
]

---
# Principles in the tidyverse

1. Consistent data structures: **data frame**. Usually, tidy data format:
  - Each variable must have its own column
  - Each observation must have its own row
  - Each value must have its own cell

2. Each function should solve one small and well-defined class of problems

3. Rely on function composition to simplify data science workflow by using, as an example, the `magrittr` **pipe** thus enhancing readability and avoiding the need to name interim objects

### ⚠️ Note:
Tidyverse is a quite handy set of tools for solving data science problems and recommended to work with data up to 1-2 Gb. When you work with larger data (10-100 Gb), you should use `data.table` as well as other approaches to the data (Grolemund &amp; Wickham, 2017).

---
background-image: url(https://raw.githubusercontent.com/tidyverse/tidyverse/master/man/figures/logo.png)
background-size: 100px
background-position: 90% 3%

# Install [tidyverse](www.tidyverse.org) 📦

.pull-left[

```r
# Install all tidyverse packages
install.packages("tidyverse")
```
]

.pull-right[

```r
# Equivalent of
install.packages("ggplot2")
install.packages("dplyr")
install.packages("tidyr")
install.packages("readr")
install.packages("purrr")
install.packages("tibble")
install.packages("hms")
install.packages("stringr")
install.packages("lubridate")
install.packages("forcats")
install.packages("DBI")
install.packages("haven")
install.packages("httr")
install.packages("jsonlite")
install.packages("readxl")
install.packages("rvest")
install.packages("xml2")
install.packages("modelr")
install.packages("broom")
```
]

.footnote[
&lt;hr&gt;
source: [Github tidyverse](https://github.com/tidyverse/tidyverse) on 22 May 2019
]

---
# Data science project with tidyverse

.center[
"The tidyverse is a **language** for solving **data science** challenges with **R code**." 
&lt;br&gt;
(Hadley Wickham)
]

![](images/workflow.png)

---
background-image: url(https://raw.githubusercontent.com/tidyverse/tidyverse/master/man/figures/logo.png)
background-size: 100px
background-position: 90% 3%

# Load [tidyverse](www.tidyverse.org) 📦


```r
# Load core packages
library(tidyverse)
```

```
## ── Attaching packages ────────────────────────────────────── tidyverse 1.2.1 ──
```

```
## ✔ ggplot2 3.1.1     ✔ purrr   0.3.2
## ✔ tibble  2.1.1     ✔ dplyr   0.8.1
## ✔ tidyr   0.8.3     ✔ stringr 1.4.0
## ✔ readr   1.3.1     ✔ forcats 0.4.0
```

```
## ── Conflicts ───────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
```

---
class: center, middle

# Data

---
# Datasets

**Source:**
&lt;br&gt;
Github of [TidyTuesday: A weekly data project in R from the R4DS online learning community](https://github.com/rfordatascience/tidytuesday)

**Datasets #10: 2019-03-05**
&lt;br&gt;
Data [Women in the Workforce](https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-03-05)

.pull-left[
![](images/dataGithub.png)
]

.pull-right[
.center[
**Question?**

❓ Between 2013 and 2016, were the earnings of women and men similar across occupations for full-time workers? 
]
]

The data format is **csv**

---
class: center, middle

# Import data

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/readr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Import data with [readr](http://readr.tidyverse.org/)

- Loads flat files in R
- Imports rectangular data frames (columns are variables and rows are observations)
- `readr::read_csv()` is faster than `read.csv()`


--

```r
# Import data from github
jobsGender &lt;- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-03-05/jobs_gender.csv")

employedGender &lt;- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-03-05/employed_gender.csv")
```

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/readr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Import data with readr


```r
# Import data from github
jobsGender &lt;- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-03-05/jobs_gender.csv")

# Print data
jobsGender
```

```
## # A tibble: 2,088 x 12
##     year occupation major_category minor_category total_workers
##    &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;                  &lt;dbl&gt;
##  1  2013 Chief exe… Management, B… Management           1024259
##  2  2013 General a… Management, B… Management            977284
##  3  2013 Legislato… Management, B… Management             14815
##  4  2013 Advertisi… Management, B… Management             43015
##  5  2013 Marketing… Management, B… Management            754514
##  6  2013 Public re… Management, B… Management             44198
##  7  2013 Administr… Management, B… Management            109703
##  8  2013 Computer … Management, B… Management            489048
##  9  2013 Financial… Management, B… Management            990611
## 10  2013 Compensat… Management, B… Management             14656
*## # … with 2,078 more rows, and 7 more variables: workers_male &lt;dbl&gt;,
*## #   workers_female &lt;dbl&gt;, percent_female &lt;dbl&gt;, total_earnings &lt;dbl&gt;,
## #   total_earnings_male &lt;dbl&gt;, total_earnings_female &lt;dbl&gt;,
## #   wage_percent_of_male &lt;dbl&gt;
```

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/readr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Write to a file with readr


```r
# Save data locally
write_csv(jobsGender, path = "./data/jobsGender.csv")
write_csv(employedGender, path = "./data/employedGender.csv")
```

---
class: center, middle

# Tidy data

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/tidyr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Reshape data with [tidyr](http://tidyr.tidyverse.org/)

- Creates a tidy dataset by reshaping the layout of tabular data
- Usually solves the following **problems**:
  * One variable spread across multiple columns
  * One observation scattered across multiple rows

- Important **verbs**:

  * `gather()` - gathers multiple columns into a new one, result "wide" cata becomes longer
  * `spread()` - spreads rows into multiple columns, result "long" data becomes wider
  
  * `separate()` - separates a column into multiple columns
  * `unite()` - unites multiple columns into one

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/tidyr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Reshape data with tidyr


```r
# Gather columns into two new columns
jobsTidy &lt;- gather(jobsGender, 
                   key = "workerGender", 
                   value = "earnings",
                   c(workers_male, workers_female))

dplyr::glimpse(jobsTidy)

# Inspect values of variable workerGender
unique(jobsTidy$workerGender)
```
--
&lt;br&gt;

```r
# Separate column workerGender into three new columns
jobsTidySep &lt;- separate(jobsTidy, 
                        col = workerGender,
                        into = c("totalEarnings", "earningsTotal", "gender"),
                        sep = "_",
                        remove = TRUE)

dplyr::glimpse(jobsTidySep)
```

---
class: center, middle

# It's your turn...

Do other variables in this dataset require such procedure?
&lt;br&gt;
Or other `tidyr` verb?

---
class: center, middle

# Transform data

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/dplyr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Manipulate data with [dplyr](http://dplyr.tidyverse.org/)

- Grammar of data manipulation
- Transforms tabular data

- Basic single-table **verbs** for data manipulation:
  * `mutate()` - creats new variables that are functions of existing variables
  * `select()` - extracts variables
  * `filter()` - extract rows that meet logical criteria
  * `summarise()` / `summarize()` - calculate aggregate measures for groups
  * `arrange()` - reorder the rows
  * `group_by()` - group by one or more variables
  
- Some two-table **verbs** for data manipulation:
  * `inner_join()`
  * `left_join()`
  * `right_join()`
  * `full_join()`
  * `semi-join()`
  * `anti_join()`

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/dplyr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Manipulate data with dplyr


```r
# Join two datasets
joinJobs &lt;- inner_join(jobsTidySep, 
                       employedGender,
                       by = "year")

dplyr::glimpse(joinJobs)
```
--
&lt;br&gt;

```r
# Select variables of interest
joinJobsShort &lt;- select(joinJobs, c(year:minor_category, earnings, gender, full_time_female, full_time_male))


dplyr::glimpse(joinJobsShort)
```

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/dplyr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Manipulate data with dplyr


```r
# Filter women
jobsFilter &lt;- filter(joinJobsShort, gender == "female")
```
--
&lt;br&gt;
.pull-left[
**Logical operators**
  * `==`  equal
  * `&gt;`   greater than
  * `&lt;`   less than
  * `&gt;=`  greater than or equal
  * `&lt;=`  less yhan or equal
  * `!=`  not equal
]

.pull-right[
**Boolean operators**
  * `&amp;` and
  * `|` or
  * `!` not
]
---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/dplyr.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Manipulate data with dplyr


```r
# Summarise
summarise(jobsFilter, earnMean = mean(earnings, na.rm = TRUE))
```
--
&lt;br&gt;
**Summary functions**
  * `min()`
  * `max()`
  * `mean()`
  * `median()`
  * `quantile()`
  * `sd()`
  * `var()`
  * `IQR()`
  
---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/pipe.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# The pipe operator: %&gt;%

- `magrittr` package
- loads automatically
- code more readable when successive commands are required
&lt;br&gt;
&lt;br&gt;

.center[
&lt;br&gt;
&lt;br&gt;
`function(object, arguments)`

with pipe

`object %&gt;% function(arguments)`

pipe can be read as **"then"**
]

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/pipe.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Piped code


```r
# Code with pipe
pipeSummary &lt;- joinJobs %&gt;%
  select(c(year:minor_category, earnings, gender, full_time_female, full_time_male)) %&gt;% 
  filter(gender == "female") %&gt;% 
  group_by(occupation, major_category, minor_category) %&gt;% 
  summarise(earningsMean = mean(earnings, na.rm = TRUE)) %&gt;%
  arrange(desc(earningsMean))
```

---
class: inverse, center, middle

# Bring it all together

---
# It's your turn...

<div class="countdown" id="timer_5cf6e928" style="right:0;bottom:0;">
<code><span class="digits minutes">15</span><span class="digits colon">:</span><span class="digits seconds">00</span></code>
</div>

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

.center[
**Question?**

❓ Between 2013 and 2016, were the earnings of women and men similar across occupations for full-time workers? 
]

---
# Additional Resources

### Books and Papers
- Grolemund, G., &amp; Wickham, H. (2017). [*R for Data Science.*](https://r4ds.had.co.nz)
- Grolemund, G. (2019). [*The Tidyverse Cookbook.*](https://rstudio-education.github.io/tidyverse-cookbook/)
- Ross, Z., Wickham, H., &amp; Robinson, D. (2017). [Declutter your R workflow with tidy tools.](https://peerj.com/preprints/3180/) *PeerJ Preprints*.
- Wickham, H. (2014). [Tidy data](https://www.jstatsoft.org/article/view/v059i10). *Journal of Statistical Software*, *59*(10), 1-23.

### Other
- RStudio [cheat sheets](https://www.rstudio.com/resources/cheatsheets/)
- [tidyverse](https://www.tidyverse.org/) website

---
class: inverse, center, middle

# Save the date!

### 19th June
18:00-21:00

### Data visualization with R

📍 Frankfurt School of Finance and Management

---

class: center, middle

# Keep in touch!
&lt;br&gt;

<i class="fas  fa-envelope " style="color:#88398A;"></i> [frankfurt@rladies.org](mailto:frankfurt@rladies.org) &lt;br&gt;
<i class="fab  fa-meetup " style="color:#88398A;"></i> [https://www.meetup.com/rladies-frankfurt/](https://www.meetup.com/rladies-frankfurt/) &lt;br&gt;
<i class="fab  fa-twitter " style="color:#88398A;"></i> [@RLadiesFRA](https://twitter.com/RLadiesFRA) &lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan) by [Yihui Xie](https://twitter.com/xieyihui?lang=en) with the [Rladies](https://alison.rbind.io/post/r-ladies-slides/) theme by [Alison Hill](https://twitter.com/apreshill).

---
class: inverse, center, middle

# Thank you!

![](https://media.giphy.com/media/Bog2XtnfH6Ypy/giphy.gif)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
